<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../style.css">
    <title>Cerebellum | Shubham Kumar</title>
</head>

<body>
    <!-- Header outside container for full-width sticky effect -->
    <header>
        <div
            style="width: 100%; max-width: 1100px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;">
            <div class="nav-path">
                <a href="../index.html">~/</a>
                <a href="../projects.html">projects/</a>
                <span class="active-path" style="margin-left:2px;">cerebellum</span>
                <span style="color:var(--surface1); margin-left:5px;">|</span>
            </div>
            <nav>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../projects.html">Projects</a></li>
                    <li><a href="#" id="more-btn">More...</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">

        <div class="hero-preview-card has-bg" style="background-image: url('../images/Cerebellum.png');">
            <div class="hero-window-wrapper">
                <div class="window">
                    <div class="window-dots">
                        <div class="w-dot w-red"></div>
                        <div class="w-dot w-yel"></div>
                        <div class="w-dot w-grn"></div>
                    </div>
                    <div class="window-header"><span>cerebellum</span><span>Game</span></div>
                    <p style="font-size: 0.9rem; color: var(--subtext0); padding: 20px 0;">
                        A real-time, event-driven multiplayer drawing and guessing game powered by WebSockets.
                    </p>
                </div>
            </div>
        </div>

        <h1 style="font-size: 2.5rem; margin-bottom: 20px; color:var(--green);">Cerebellum</h1>

        <div class="meta-row">
            <div class="meta-item">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 002 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2z" />
                </svg>
                <span>2024</span>
            </div>
            <div class="meta-item">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" />
                </svg>
                <a href="https://github.com/CosmicShubham1/cerebellum" class="meta-link" target="_blank">Repository</a>
            </div>
            <div class="meta-item">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                </svg>
                <span>Team: <a href="https://github.com/ItsMat78" target="_blank">Shreyash Rai</a></span>
            </div>
        </div>

        <div class="project-tags">
            <span class="tag-pill">flask</span>
            <span class="tag-pill">websockets</span>
            <span class="tag-pill">ai-game</span>
        </div>

        <div class="project-content-body">
            <p><strong>Cerebellum</strong> is a low-latency, multiplayer browser game that digitizes the classic
                "Pictionary" experience. Built on an event-driven architecture, it synchronizes game state across
                multiple clients in real-time, allowing users to draw on a shared canvas while others guess the subject
                matter to earn points.</p>
            <p>The system is designed to handle rapid state changes—such as brush strokes and chat messages—without the
                overhead of traditional HTTP requests. It features a robust server-side game loop that manages room
                logic, player roles (drawer vs. guesser), and automated scoring based on reaction time.</p>

            <h3>
                Key Features</h3>
            <ul style="margin-left: 20px; list-style-type: disc; color: var(--subtext0);">
                <li style="margin-bottom: 10px;"><strong>Real-Time Canvas Synchronization:</strong> Utilizes
                    bi-directional WebSocket communication to broadcast drawing coordinates (<code>draw_history</code>)
                    instantly to all connected clients.</li>
                <li style="margin-bottom: 10px;"><strong>Dynamic Role Rotation:</strong> Implements a round-robin
                    algorithm to cycle the "Drawer" role among players while managing game states (Lobby, Playing,
                    Ended).</li>
                <li style="margin-bottom: 10px;"><strong>Competitive Scoring Algorithm:</strong> Features a tiered
                    scoring logic where the first successful guesser is awarded higher points (50 pts) compared to
                    subsequent correct guessers (30 pts).</li>
                <li style="margin-bottom: 10px;"><strong>State Management:</strong> Maintains persistent server-side
                    objects (<code>Player</code> class) to track session IDs, connectivity status, and scores even
                    during rapid socket reconnections.</li>
                <li style="margin-bottom: 10px;"><strong>Concurrency:</strong> Leverages Python threading to manage game
                    timers independently of the main event loop, ensuring non-blocking gameplay.</li>
            </ul>

            <h3>
                Architecture & Tech Stack</h3>
            <p>The application follows a client-server model using the WebSocket protocol for full-duplex communication.
            </p>
            <ul style="margin-left: 20px; list-style-type: disc; color: var(--subtext0);">
                <li style="margin-bottom: 10px;"><strong>Backend Framework:</strong> Flask coupled with Flask-SocketIO
                    to handle namespace events.</li>
                <li style="margin-bottom: 10px;"><strong>Protocol:</strong> WebSockets (falling back to long-polling if
                    necessary) for millisecond-level data transfer.</li>
                <li style="margin-bottom: 10px;"><strong>Concurrency:</strong> Async Mode (Threading) used to handle the
                    countdown timer (<code>round_timer</code>) without freezing the server.</li>
                <li style="margin-bottom: 10px;"><strong>Data Structure:</strong> Object-Oriented design using
                    <code>Player</code> and <code>Country</code> classes to encapsulate user state in memory.
                </li>
            </ul>

            <h3>
                Game Loop Workflow</h3>
            <p><strong>Lobby Initialization:</strong> Players connect via <code>socketio.on('join')</code>,
                instantiating a <code>Player</code> object mapped to their session ID (<code>request.sid</code>).</p>
            <p><strong>Round Start:</strong> The Host triggers the game. The server selects a
                <code>current_drawer</code>, picks a random word from <code>words.txt</code>, and generates a hint
                (e.g., _ _ _ _).
            </p>

            <h4>The Drawing Phase:</h4>
            <ul style="margin-left: 20px; list-style-type: circle; color: var(--subtext0);">
                <li>The Drawer receives the target word.</li>
                <li>As they draw, coordinate data is emitted via the <code>draw</code> event and broadcast to all other
                    clients to render lines locally.</li>
            </ul>

            <h4>The Guessing Phase:</h4>
            <ul style="margin-left: 20px; list-style-type: circle; color: var(--subtext0);">
                <li>Guessers type words into the chat.</li>
                <li>The server validates inputs against <code>current_word</code> in real-time.</li>
                <li>Correct guesses trigger the <code>correct_guess</code> event and update the scoreboard.</li>
            </ul>

            <p><strong>Round Termination:</strong> Once the timer expires, the server calculates final scores, clears
                the canvas, and rotates to the next drawer.</p>

            <h3>
                Sample Code (Scoring Logic)</h3>
            <div class="code-container">
                <button class="copy-btn">Copy</button>
                <pre><code>
@socketio.on('guess')
def on_guess(guess):
    player = find_player(request.sid)
    
    # Validation: Drawer cannot guess their own word
    if not player or player.is_drawer:
        return

    # Check against current target word
    guess = guess.strip()
    correct = (guess.lower() == current_word.lower())

    if correct:
        # Tiered Scoring: First guesser gets bonus points
        if not correct_guesses:
             first_bonus_points(player) 
        
        correct_guesses.append({'player_id': request.sid, 'timestamp': time.time()})
        emit('correct_guess', {'name': player.name}, broadcast=True)
    else:
        # Broadcast wrong guess to chat
        emit('new_guess', {'player': player.name, 'guess': guess}, broadcast=True)
            </code></pre>
            </div>
        </div>

        <div class="footer-bar">
            <div>© 2026 Shubham Kumar</div>
            <div>shubham24101@iiitnr.edu.in</div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="overlay" id="overlay"></div>
    <div class="sidebar" id="sidebar">
        <button class="close-btn" id="close-sidebar">&times;</button>
        <h2>Menu</h2>
        <nav>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../about.html">About</a></li>
                <li><a href="../projects.html">Projects</a></li>
                <li><a href="../Shubham's Resume_.pdf" target="_blank">Resume</a></li>
                <li><a href="https://github.com/CosmicShubham1">Github</a></li>
                <li><a href="https://linkedin.com/in/cosmicshubham">LinkedIn</a></li>
            </ul>
        </nav>
    </div>
    <script src="../script.js"></script>
</body>

</html>